<!DOCTYPE html>

<html>

<head>
    <title>Roll Dice - Settings</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="style/headers.css" rel="stylesheet" type="text/css" />
    <link href="style/switches.css" rel="stylesheet" type="text/css">
    <link href="style/layout.css" rel="stylesheet" type="text/css">
    <link href="style/buttons.css" rel="stylesheet" type="text/css">
    <script src="app.js" type="text/javascript"></script>

</head>

<body>

    <div id="main">
        <section role="region" class="vbox fit">
            <header id="header">
                <button id="back"><span class="icon icon-back">back</span></button>
				<h1 style="margin-right: 50px">Settings</h1>
            </header>
        </section>
		<br/>
        <section style="margin: 0; text-align: center; width: 100%">

            
            <fieldset>
                <legend>
                    Number of dices:
                </legend>
                <br/>
                <select id="numberofdices">
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5</option>
                    <option value="6">6</option>
                </select>
            </fieldset>
            <br/>

            <fieldset>
                <legend>
                    Dice color:
                </legend>
                <select id="color">
                    <option value="blue">blue</option>
                    <option value="red">red</option>
                </select>
            </fieldset>
            <br/>

            <fieldset>
                <legend>
                    Custom roll:
                </legend>

                <br/>
                <select id="customroll">
                    <option value="true">On</option>
                    <option value="false">Off</option>
                </select>
                </fieldset><br/> 
            <button id="save" /> Save settings
            </button>
        </section>

    </div>



    <script>
        // settings
        var color;
        var numberOfDices;
        var customRoll;

        CreateDBConnection(loadSettings);
		
        // on load
        window.onload = function() {

			// back button click
            document.getElementById("back").onclick = function() {
                redirect("index.html");
            }
			
			// save button click
			document.getElementById("save").onclick = function() {
                CreateDBConnection(save);
				document.getElementById("header").className = document.getElementById("color").value;
				document.getElementById("save").className = document.getElementById("color").value;
            }
			
			// set option default values
			document.getElementById("main").style.display = 'none';
			setTimeout(function(){
				// Set custom roll value
				var rolloptions = document.getElementById("customroll").children;
				for(var i = 0; i < rolloptions.length; i++)
				{
					if(rolloptions[i].value == customRoll)
					{
						document.getElementById("customroll").selectedIndex = i;
						break;
					}
				}
				
				// Set color value
				var dicecolor = document.getElementById("color").children;
				for(var i = 0; i < dicecolor.length; i++)
				{
					if(dicecolor[i].value == color)
					{
						document.getElementById("color").selectedIndex = i;
						break;
					}
				}
					
				// Set number of dices
				
				document.getElementById("numberofdices").selectedIndex = numberOfDices - 1;	
				
				
				document.getElementById("header").className = color;
				document.getElementById("save").className = color;
				// Display form
				document.getElementById("main").style.display = 'block';
			},100);
			
        }
    </script>
</body>

</html>